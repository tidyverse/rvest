<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SelectorGadget • rvest</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../tidyverse-2.css" rel="stylesheet">
<!--optional theme--><link href="../.css" rel="stylesheet">
<meta property="og:title" content="SelectorGadget">
<meta property="og:description" content="rvest">
<meta property="og:image" content="https://rvest.tidyverse.org/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">rvest</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.6.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/harvesting-the-web.html">Harvesting the web with rvest</a>
    </li>
    <li>
      <a href="../articles/selectorgadget.html">SelectorGadget</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/rvest/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="selectorgadget_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>SelectorGadget</h1>
                        <h4 class="author">Hadley Wickham</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/rvest/blob/master/vignettes/selectorgadget.Rmd"><code>vignettes/selectorgadget.Rmd</code></a></small>
      <div class="hidden name"><code>selectorgadget.Rmd</code></div>

    </div>

    
    
<style>
img {
border: 0px;
outline: 0 ;
}
</style>
<p>SelectorGadget is a JavaScript bookmarklet that allows you to interactively figure out what css selector you need to extract desired components from a page.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>To install it, open this page in your browser, and then drag the following link to your bookmark bar: <a href="javascript:(function()%7Bvar%20s=document.createElement('div');s.innerHTML='Loading...';s.style.color='black';s.style.padding='20px';s.style.position='fixed';s.style.zIndex='9999';s.style.fontSize='3.0em';s.style.border='2px%20solid%20black';s.style.right='40px';s.style.top='40px';s.setAttribute('class','selector_gadget_loading');s.style.background='white';document.body.appendChild(s);s=document.createElement('script');s.setAttribute('type','text/javascript');s.setAttribute('src','https://dv0akt2986vzh.cloudfront.net/unstable/lib/selectorgadget.js');document.body.appendChild(s);%7D)();">SelectorGadget</a>.</p>
</div>
<div id="use" class="section level2">
<h2 class="hasAnchor">
<a href="#use" class="anchor"></a>Use</h2>
<p>To use it, open the page</p>
<ol style="list-style-type: decimal">
<li><p>Click on the element you want to select. SelectorGadget will make a first guess at what css selector you want. It’s likely to be bad since it only has one example to learn from, but it’s a start. Elements that match the selector will be highlighted in yellow.</p></li>
<li><p>Click on elements that shouldn’t be selected. They will turn red. Click on elements that <em>should</em> be selected. They will turn green.</p></li>
<li><p>Iterate until only the elements you want are selected. SelectorGadget isn’t perfect and sometimes won’t be able to find a useful css selector. Sometimes starting from a different element helps.</p></li>
</ol>
<p>For example, imagine we want to find the actors listed on an IMDB movie page, e.g. <a href="http://www.imdb.com/title/tt1490017/">The Lego Movie</a>.</p>
<ol style="list-style-type: decimal">
<li>
<p>Navigate to the page and scroll to the actors list.</p>
<p><img src="selectorgadget-1-s.png" width="253"></p>
</li>
<li>
<p>Click on the SelectorGadget link in the bookmarks. The SelectorGadget console will appear at the bottom of the screen, and element currently under the mouse will be highlighted in orange.</p>
<p><img src="selectorgadget-2-s.png" width="253"></p>
</li>
<li>
<p>Click on the element you want to select (the name of an actor). The element you selected will be highlighted in green. SelectorGadget guesses which css selector you want (<code>a</code> in this case), and highlights all matches in yellow (see total count equal to 592 as indicated on on the “Clear” button). This seems to be a little too excessive.</p>
<p><img src="selectorgadget-3-s.png" width="253"></p>
</li>
<li>
<p>Scroll around the document to find elements that you don’t want to match and click on them. For example, we don’t to match the character the actor contributed to, so we click on it and it turns red. The css selector updates to <code>.primary_photo+ td a</code>.</p>
<p><img src="selectorgadget-4-s.png" width="148"><img src="selectorgadget-5-s.png" width="148"></p>
</li>
</ol>
<p>Once we’ve determined the css selector, we can use it in R to extract the values we want:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://rvest.tidyverse.org/">rvest</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: xml2</span>
<span class="va">lego_url</span> <span class="op">&lt;-</span> <span class="st">"http://www.imdb.com/title/tt1490017/"</span>
<span class="va">html</span> <span class="op">&lt;-</span> <span class="fu">read_html</span><span class="op">(</span><span class="va">lego_url</span><span class="op">)</span>
<span class="va">cast</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/html_nodes.html">html_nodes</a></span><span class="op">(</span><span class="va">html</span>, <span class="st">".primary_photo+ td a"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">cast</span><span class="op">)</span>
<span class="co">#&gt; [1] 15</span>
<span class="va">cast</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>
<span class="co">#&gt; {xml_nodeset (2)}</span>
<span class="co">#&gt; [1] &lt;a href="/name/nm0004715/?ref_=tt_cl_t1"&gt; Will Arnett\n&lt;/a&gt;</span>
<span class="co">#&gt; [2] &lt;a href="/name/nm0006969/?ref_=tt_cl_t2"&gt; Elizabeth Banks\n&lt;/a&gt;</span></code></pre></div>
<p>Finally, we can extract the text from the selected HTML nodes.</p>
<p>Looking carefully at this output, we see twice as many matches as we expected. That’s because we’ve selected both the table cell and the text inside the cell. We can experiment with selectorgadget to find a better match or look at the html directly.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/html_text.html">html_text</a></span><span class="op">(</span><span class="va">cast</span>, trim <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt;  [1] "Will Arnett"     "Elizabeth Banks" "Craig Berry"     "Alison Brie"    </span>
<span class="co">#&gt;  [5] "David Burrows"   "Anthony Daniels" "Charlie Day"     "Amanda Farinos" </span>
<span class="co">#&gt;  [9] "Keith Ferguson"  "Will Ferrell"    "Will Forte"      "Dave Franco"    </span>
<span class="co">#&gt; [13] "Morgan Freeman"  "Todd Hansen"     "Jonah Hill"</span></code></pre></div>
<p>Let’s say we’re also interested in extracting the links to the actors’ pages. We can access html attributes of the selected nodes using <code><a href="../reference/html_text.html">html_attrs()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cast_attrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/html_text.html">html_attrs</a></span><span class="op">(</span><span class="va">cast</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">cast_attrs</span><span class="op">)</span>
<span class="co">#&gt; [1] 15</span>
<span class="va">cast_attrs</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt;                             href </span>
<span class="co">#&gt; "/name/nm0004715/?ref_=tt_cl_t1" </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt;                             href </span>
<span class="co">#&gt; "/name/nm0006969/?ref_=tt_cl_t2"</span></code></pre></div>
<p>As we can see there’s only one attribute called <code>href</code> which contains relative url to the actor’s page. We can extract it using <code><a href="../reference/html_text.html">html_attr()</a></code>, indicating the name of the attribute of interest. Relative urls can be turned to absolute urls using <code>url_absolute()</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cast_rel_urls</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/html_text.html">html_attr</a></span><span class="op">(</span><span class="va">cast</span>, <span class="st">"href"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">cast_rel_urls</span><span class="op">)</span>
<span class="co">#&gt; [1] 15</span>
<span class="va">cast_rel_urls</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>
<span class="co">#&gt; [1] "/name/nm0004715/?ref_=tt_cl_t1" "/name/nm0006969/?ref_=tt_cl_t2"</span>

<span class="va">cast_abs_urls</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/html_text.html">html_attr</a></span><span class="op">(</span><span class="va">cast</span>, <span class="st">"href"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">url_absolute</span><span class="op">(</span><span class="va">lego_url</span><span class="op">)</span>
<span class="va">cast_abs_urls</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>
<span class="co">#&gt; [1] "http://www.imdb.com/name/nm0004715/?ref_=tt_cl_t1"</span>
<span class="co">#&gt; [2] "http://www.imdb.com/name/nm0006969/?ref_=tt_cl_t2"</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="tidyverse">
  <p>rvest is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href="http://hadley.nz">Hadley Wickham</a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  </body>
</html>
